import telebot
from telebot import types
from settings import token
import requests
from bs4 import BeautifulSoup

print("                                      .=+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=\n"
      "                                 .-+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*\n"
      "                               :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.\n"
      "                               *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:\n"
      "                              .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=\n"
      "                              *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=----=+*#@@\n"
      "                             .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
      "                             -@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
      "                             +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
      "                             %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
      "                            :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
      "        .=*#%%#+.           #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+-\n"
      "   .=++*@#+====#@:         *@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%+.\n"
      " .=@#+++%@+=====%*       -*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%##*+====++=:\n"
      "%%@%=====#@+====*%   :-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%*++#%%#+=========+\n"
      "==+@#=====@%====+@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=:.       .=#@*========\n"
      "===*@=====@@*=====*%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%##*+++@-             -@@*======\n"
      "===*@====+@@@%+=====+@@@@@@@@@@@@@@@@@@@@@@@@@@@%##*+++=========#@      .%@%=     *@+=====\n"
      "===*@+===*@@@@@@#+++#@@@@@@@@@@@@@@@@@@@@@@%#*+=================+@.      -**:     :@*=====\n"
      "===+@+===*@@@@%%@@@@@@@@@@@@@@@@@@@%#**++####*+==================#%:              *%======\n"
      "===+@+===+@@*====*#%@@@%***+=:.#%+=====+*###%@@@%#*===============+%%+.        :*%*=======\n"
      "===+@+===*@#=======+@@=       :@*====#@+:    .   :+#*===============+#%%*+++*##*+==#======\n"
      "===*@+===#@+=====+%@+.        %%===+@*:     -=:     *#==============*#==++++=====#@#======\n"
      "==+@@***#@%=====*@*.         *@*===#*       #@%     .@%+=============*%%*=====+#@@*=======\n"
      "==#@@%##*+====*%+.          :@@====*@-              +@@@+==============+#%@%%@@@#+========\n"
      "#%@*========+%*.            -@#=====#@*-..      :-#@#+=*@*=============#%*++++====+++=====\n"
      "**=========#@-              -@*=======++*###**###*+=====#@+=============+*%@%###%@@#======\n"
      "==========#%.               :@#===============+**========#@++++============+*###*+========\n"
      "========*%*.                :@%==========*****+===========+##+============================\n"
      "======*@#.                  =@@+=====+**+====++*+=========================================\n"
      "====+%#:                    =@@=========+****++====================================+*##%%#\n"
      "==+%#:                      =@@=============================================+*#%##**=-.\n"
      "#%%-                         %@+====================================+**#%%%#*=.\n"
      "-:                           +@*==========================+**#####*+=--:.\n"
      "                             -@#=================++*##%%%#*+-:.                       ..-+\n"
      "                             .@@=========**#%%%%#*+=-:.                            .=%%*=-\n"
      "                              #@*=====%@*+=-.                                 .:=*%@*:\n"
      "                              =@@=====%%.                                :*#%#*+--.\n"
      "                               %@#=====#@=                         .:=*#*+=:            :#\n"
      "                               -@@+=====*@*.               .:-=+*##*=:                :*%+\n"
      "                                -@@*=====+#@*++******%%@@@%#*+=:.                  .-#%+==\n"
      "                                 -@@*=======*@@@=::......                       :+%@#+====\n"
      "                                  -@@*========+%%=                          .-+%@#*=======\n"
      "                                   :@@#=========+*#*+-                  :=*%%*+===========\n"
      "                                    .=%@*============+**++=------====++**+================")

header = {
    'user-agent': 'Slinux'
}

link = 'https://randstuff.ru/fact/'
bot = telebot.TeleBot(token)

@bot.message_handler(commands=["fact"])
def info(message):
    response = requests.get(link, headers=header).text
    soup = BeautifulSoup(response, 'lxml')
    fact = soup.find('div', id="fact").text

    facts = fact.replace("–ü—Ä–µ—Å–Ω–æ–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ", "")
    bot.send_message(message.chat.id, "<b>üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç:</b>\n"
                                      "\n"
                                      f"{facts}", parse_mode='html')

@bot.message_handler(commands=["start"])
def beginning(message):
    bot.send_message(message.chat.id, "üé≤")
    bot.send_message(message.chat.id, "üîç –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å—ã–ª–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ñ–∞–∫—Ç—ã")
    markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
    block = types.KeyboardButton("üé≤ –§–∞–∫—Ç")

    markup.add(block)
    bot.send_message(message.chat.id,"–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É,—á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç".format(message.from_user),reply_markup=markup)

@bot.message_handler(content_types=["text"])
def log(message):
    if message.chat.type == 'private' and message.text == 'üé≤ –§–∞–∫—Ç':
        response = requests.get(link, headers=header).text
        soup = BeautifulSoup(response, 'lxml')
        fact = soup.find('div', id="fact").text

        facts = fact.replace("–ü—Ä–µ—Å–Ω–æ–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ", "")
        bot.send_message(message.chat.id, "<b>üé≤ –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç:</b>\n"
                                            "\n"
                                            f"{facts}", parse_mode='html')

bot.polling(none_stop=True)